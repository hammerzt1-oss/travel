# 联调测试执行清单

## ✅ 准备工作确认

### 前端
- [x] 环境变量文件已创建（.env.local）
- [x] API对接代码已完成
- [x] 加载和错误状态已处理
- [x] 代码准备就绪

### 后端
- [x] .env文件已创建
- [x] PORT=3001 已配置
- [x] OTA_PID=TEST_PID 已配置（测试用）
- [x] 服务准备就绪

### 运营
- [x] 20个城市数据完整
- [x] 推荐文案质量达标
- [x] 信任信号数据正确
- [x] 数据验证通过

---

## 🚀 开始联调测试

### 第1步：启动服务（5分钟）

**终端1：启动后端**
```bash
cd backend
npm install  # 如果还没安装
npm run dev
```

**验证后端启动：**
- 访问 http://localhost:3001/health
- 应该返回：`{"status":"ok","timestamp":"..."}`

**终端2：启动前端**
```bash
cd frontend
npm install  # 如果还没安装
npm run dev
```

**验证前端启动：**
- 访问 http://localhost:3000
- 应该看到推荐列表页面

---

### 第2步：功能测试（20分钟）

#### 测试1：首页推荐列表 ✅/❌

**测试步骤：**
1. 打开 http://localhost:3000
2. 观察页面加载（应该有骨架屏或加载动画）
3. 检查是否显示推荐列表

**检查项：**
- [ ] 看到【本周推荐】标签和推荐卡片
- [ ] 看到【本月推荐】标签和推荐卡片
- [ ] 看到【学生常选】标签和推荐卡片
- [ ] 卡片显示城市名称（如：杭州、苏州、南京）
- [ ] 卡片显示预算区间（如：600-800）
- [ ] 卡片显示交通信息（如：高铁直达 · 1.5h）
- [ ] 卡片显示天气信息（如：未来两天晴）
- [ ] 卡片显示"预算XXX内可成行"（primary_reason）
- [ ] 卡片显示信任信号（1-2个）
- [ ] 卡片显示CTA按钮："查看学生最低价"
- [ ] 占位图正常显示（渐变背景）

**预期结果：**
- 推荐列表正常显示
- 卡片信息完整
- 布局美观

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]
- [ ] 问题2：[描述]

---

#### 测试2：推荐卡片点击 ✅/❌

**测试步骤：**
1. 点击任意推荐卡片（如：杭州）
2. 观察页面跳转
3. 检查详情页内容

**检查项：**
- [ ] 成功跳转到详情页（URL：/destinations/1）
- [ ] 详情页正常加载（有加载状态）
- [ ] 显示目的地名称（如：杭州）
- [ ] 显示一句话结论（如：适合预算800内、周末放松、不折腾）
- [ ] 显示信任信号（已被XXX名学生选择、最近7天点击最多）
- [ ] 显示推荐理由（3条）
- [ ] 显示参考行程（Day1、Day2）
- [ ] 显示3个CTA按钮：
  - [ ] 🏨 查看学生最低价（携程）
  - [ ] 🚄 现在去订（高铁/机票）
  - [ ] 🎫 查看优惠套餐
- [ ] 显示天气信息

**预期结果：**
- 详情页正常显示
- 信息完整清晰
- CTA按钮醒目

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]
- [ ] 问题2：[描述]

---

#### 测试3：CTA按钮跳转 ✅/❌

**测试步骤：**
1. 在详情页点击"查看学生最低价（携程）"按钮
2. 观察是否在新窗口打开
3. 检查链接URL

**检查项：**
- [ ] 点击按钮后在新窗口打开
- [ ] 链接URL格式正确
- [ ] 链接包含城市参数（如：city=杭州）
- [ ] 链接包含utm_source参数（如：utm_source=travel_student）
- [ ] 链接包含pid参数（如：pid=TEST_PID）
- [ ] 链接能正常访问携程网站

**测试其他CTA：**
- [ ] 点击"现在去订（高铁/机票）"按钮
- [ ] 点击"查看优惠套餐"按钮
- [ ] 所有CTA都能正常跳转

**预期结果：**
- 所有CTA按钮能正常跳转
- 链接格式正确
- 在新窗口打开

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]
- [ ] 问题2：[描述]

---

#### 测试4：加载和错误状态 ✅/❌

**测试步骤：**
1. 刷新首页，观察加载状态
2. 停止后端服务
3. 刷新页面，观察错误状态

**检查项：**
- [ ] 加载时显示骨架屏或加载动画
- [ ] 加载状态友好（不卡顿）
- [ ] 后端停止后显示错误提示
- [ ] 错误提示友好（不是技术错误）
- [ ] 有重试按钮
- [ ] 点击重试能重新请求

**预期结果：**
- 加载状态正常
- 错误状态有友好提示
- 可以重试

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]
- [ ] 问题2：[描述]

---

#### 测试5：移动端测试 ✅/❌

**测试步骤：**
1. 打开浏览器开发者工具（F12）
2. 切换到移动端视图（iPhone/Android）
3. 刷新页面
4. 测试各项功能

**检查项：**
- [ ] 移动端布局正常（不溢出）
- [ ] 推荐卡片正常显示
- [ ] CTA按钮在可视区
- [ ] 点击区域足够大（≥44px）
- [ ] 详情页正常显示
- [ ] 所有功能可用
- [ ] 体验流畅

**预期结果：**
- 移动端布局正常
- 点击区域足够大
- 体验良好

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]
- [ ] 问题2：[描述]

---

### 第3步：数据验证（10分钟）

#### 验证1：推荐数据完整性 ✅/❌

**检查项：**
- [ ] 推荐列表包含20个城市
- [ ] 每个城市数据完整
- [ ] primary_reason字段正常显示
- [ ] 信任信号数据正确
- [ ] 预算区间合理（500-1000元）

**验证方法：**
- 检查不同推荐类型（week、month、popular）
- 检查数据是否重复
- 检查数据是否缺失

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]

---

#### 验证2：详情数据完整性 ✅/❌

**检查项：**
- [ ] 详情页数据完整
- [ ] 推荐理由清晰（3条）
- [ ] 行程合理（≥2天）
- [ ] CTA文案"像钱"
- [ ] 所有字段都有值

**验证方法：**
- 随机检查3-5个城市的详情页
- 检查文案质量
- 检查数据格式

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]

---

#### 验证3：OTA链接格式 ✅/❌

**检查项：**
- [ ] 链接格式正确
- [ ] 包含必要参数（city、utm_source、pid）
- [ ] 参数值正确编码
- [ ] 链接能正常访问

**验证方法：**
- 检查3个CTA按钮的链接
- 检查不同城市的链接
- 验证链接格式

**发现问题：**
- [ ] 无问题
- [ ] 问题1：[描述]

---

## 📊 测试结果汇总

### 功能测试结果
- 首页推荐列表：✅/❌
- 详情页显示：✅/❌
- CTA跳转：✅/❌
- 加载状态：✅/❌
- 错误状态：✅/❌
- 移动端：✅/❌

### 数据验证结果
- 推荐数据完整性：✅/❌
- 详情数据完整性：✅/❌
- OTA链接格式：✅/❌

### 总体评价
- **测试通过率：** [填写百分比]
- **核心功能：** ✅/❌（能点出去）
- **是否可上线：** ✅/❌

---

## 🐛 问题清单

### 高优先级问题
1. [问题描述]
   - 影响：[描述]
   - 状态：[待修复/修复中/已修复]

### 中优先级问题
1. [问题描述]
   - 影响：[描述]
   - 状态：[待修复/修复中/已修复]

### 低优先级问题
1. [问题描述]
   - 影响：[描述]
   - 状态：[待修复/修复中/已修复]

---

## ✅ 测试验收标准

### 核心验收（必须全部通过）
- [ ] 首页推荐正常显示
- [ ] 详情页正常显示
- [ ] CTA能正常跳转
- [ ] 移动端体验良好

**如果以上4点都通过，即可进入部署阶段。**

---

## 📝 测试报告

**测试时间：** [填写]
**测试人员：** [填写]
**测试环境：** 本地开发环境
**测试结果：** [通过/部分通过/未通过]

**下一步行动：**
- [ ] 修复发现的问题
- [ ] 准备部署
- [ ] 安排上线

---

**开始时间：现在**
**预计时间：30-40分钟**
**负责人：前端工程师 + 后端工程师**

