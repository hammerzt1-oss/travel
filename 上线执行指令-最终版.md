# 上线执行指令（最终版）

## ✅ Go / No-Go 验收结果

### 7项检查（全部通过）

1. ✅ **ID体系是否彻底隔离？** - YES
   - 酒店：hotel city_id
   - 度假：vacation destination_id
   - 后端统一生成链接

2. ✅ **OTA PID是否只存在于后端？** - YES
   - 前端无任何返佣参数
   - .env未提交

3. ✅ **CTA是否全部是"钱向文案"？** - YES
   - 没有「了解更多」
   - 没有「查看详情」
   - 只有「查看学生最低价 / 预算内可成行」

4. ✅ **是否可以接受「上线72小时0成交」？** - YES
   - 只看：CTR、CTA点击、是否跳到OTA

5. ✅ **是否已经准备好"随时下掉度假CTA"？** - YES
   - 如果联盟后台无记录，立即下掉

6. ✅ **是否有明确"上线后3天不改需求"的纪律？** - YES
   - 不加功能、不重构、只看数据

7. ✅ **今天是否真的有人执行？** - YES
   - 今天真的有人点Deploy

---

## 🚀 结论：GO

**可以上线。现在就是正确的上线窗口。**

不是"可以试试"，是"该上线了，再不就浪费验证周期"。

---

## ⏱️ T-0 ～ T+2 小时：上线执行流

### Step 1：后端部署（必须先）

**平台：** Railway / Render

**执行步骤：**
1. 部署后端服务
2. 等待部署完成
3. 获取后端URL（如：https://xxx.railway.app）

**验证：**
- [ ] 访问 `/health` 返回 200
- [ ] 手动请求 `/api/recommendations`
- [ ] 检查返回的OTA URL是否完整
- [ ] 确认URL包含PID参数

**✅ 只有验证通过，才进入下一步**

**如果卡住，说：**
- "后端已部署，/health OK" 或
- "后端已部署，但/health返回XXX"

---

### Step 2：前端部署

**平台：** Vercel

**执行步骤：**
1. 连接GitHub仓库
2. 配置环境变量：
   - `NEXT_PUBLIC_API_URL` = 后端URL（Step 1获取）
3. 点击Deploy
4. 等待部署完成
5. 获取前端URL（如：https://xxx.vercel.app）

**验证：**
- [ ] 部署成功
- [ ] 网站能正常访问
- [ ] 推荐列表正常显示

**如果卡住，说：**
- "前端已部署，生产URL是XXX" 或
- "前端部署失败，错误是XXX"

---

### Step 3：生产环境人工点击测试（必须真人）

**必须用真实浏览器，不要用curl**

**测试步骤：**
1. **测试1：首页 → 详情**
   - 打开生产环境URL
   - 点击任意推荐卡片
   - 确认跳转到详情页

2. **测试2：详情 → CTA跳转**
   - 在详情页点击「查看学生最低价」按钮
   - 确认在新窗口打开

3. **测试3：验证OTA链接**
   - 检查跳转后的地址栏
   - 确认URL包含PID参数（284116645）
   - 确认能正常访问携程网站

**至少点3次，确保流程完整**

**如果卡住，说：**
- "点击测试通过" 或
- "点击测试失败，问题是XXX"

---

### Step 4：最关键的1分钟（验证变现通路）

**执行步骤：**
1. 打开携程联盟后台
2. 登录账号
3. 查看「实时点击 / 今日数据」
4. 查找刚才的点击记录

**检查项：**
- [ ] 是否有展现记录
- [ ] 是否有点击记录
- [ ] 是否有CPS记录（如果有）

**📌 这一步 = 项目是否真正成立**

**如果看到点击记录：**
- ✅ 变现通路已通电
- ✅ 项目成立
- ✅ 可以开始数据观察

**如果看不到点击记录：**
- ⚠️ 检查PID是否正确
- ⚠️ 检查链接格式是否正确
- ⚠️ 等待几分钟后再次检查（可能有延迟）

**如果卡住，说：**
- "我在联盟后台，看到点击了" 或
- "我在联盟后台，看不到点击"

---

## 📋 上线后72小时【唯一允许做的3件事】

### ✅ 允许做的

1. **看CTR**
   - 首页推荐卡点击率
   - 记录每日数据

2. **看CTA点击**
   - 每个CTA按钮的点击次数
   - 哪个CTA点击最多

3. **看联盟后台是否有点击**
   - 检查携程联盟后台
   - 确认是否有点击记录

### ❌ 禁止做的

- ❌ 改UI
- ❌ 加功能
- ❌ 优化推荐算法
- ❌ 扩城市
- ❌ 想ROI / GMV

**你现在不是在做规模，是在验证"钱的通路是否通电"。**

---

## ⚠️ 度假CTA返佣验证（上线后第1天）

**执行时间：** 上线后立即执行（最高优先级）

**执行步骤：**
1. 点击生产环境的「套餐CTA」
2. 登录联盟后台检查记录
3. **如果没有记录 → 立即下掉套餐CTA**

**应急方案：**
- 如果没有返佣记录，立即：
  1. 修改后端代码，移除套餐CTA
  2. 修改前端代码，隐藏套餐按钮
  3. 重新部署
  4. 只保留酒店+交通

**预计时间：** 10分钟（如果验证失败）

---

## 📊 数据观察（只看3个指标）

### 必须监控的3个指标

1. **首页推荐卡CTR**（点击率）
   - CTR = 点击推荐卡片的次数 / 访问首页的次数

2. **CTA点击次数**
   - 每个CTA按钮的点击次数
   - 哪个CTA点击最多

3. **是否真实跳到OTA**（哪怕只有1次）
   - 检查联盟后台是否有点击记录

### 不要监控

- ❌ 转化率（那是OTA的事）
- ❌ 成交金额（那是OTA的事）
- ❌ 用户停留时间（不是核心指标）

---

## 🎯 关键提醒

1. **今天真的有人执行**
   - 不是"计划好了"
   - 是"今天真的有人点Deploy"

2. **上线后3天不改需求**
   - 不加功能
   - 不重构
   - 只看数据

3. **验证"钱的通路是否通电"**
   - 不是在做规模
   - 是在验证模型是否跑通

---

## 📞 遇到问题时的沟通方式

**上线过程中，如果任何一个节点卡住，直接说：**

- "后端已部署，/health OK"
- "前端已部署，生产URL是XXX"
- "我在联盟后台，看不到点击"
- "点击测试失败，问题是XXX"

**我会只针对这个节点帮你判断，不会再讲大道理。**

---

## ✅ 最终确认

**所有检查项：** ✅ 全部通过

**结论：** ✅ GO

**下一步：** 🚀 现在，去Deploy

**你已经准备好了。**

---

**创建时间：现在**
**执行时间：立即**
**预计时间：2小时**

